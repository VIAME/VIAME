# =============================================================================
# Interactive SAM2 Segmentation Service Configuration
#
# This config file sets up the SegmentViaPoints algorithm using SAM2 for
# interactive point-based segmentation in DIVE.
#
# Usage:
#   python -m viame.core.interactive_segmentation --config interactive_sam2_segmenter.conf
# =============================================================================

# -----------------------------------------------------------------------------
# Image IO Algorithm Configuration
# -----------------------------------------------------------------------------
# Use KWIVER native image loading to avoid memory layout issues with PIL/numpy
image_io:type = vxl

# -----------------------------------------------------------------------------
# Segment Via Points Algorithm Configuration
# -----------------------------------------------------------------------------
segment_via_points:type = sam2

# SAM2 algorithm settings
# Keys are relative to segment_via_points:sam2 block
block segment_via_points:sam2
  relativepath :checkpoint = models/sam2_hbp.pt
  :cfg = configs/sam2.1/sam2.1_hiera_b+.yaml
  :device = cuda
endblock

# -----------------------------------------------------------------------------
# Service Configuration
# -----------------------------------------------------------------------------
service:hole_policy = remove
service:multipolygon_policy = largest
service:max_polygon_points = 25
service:adaptive_simplify = false

# -- end of file --
