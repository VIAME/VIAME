# =============================================================================
# Interactive SAM3 Segmentation Service Configuration
#
# This config file sets up the SegmentViaPoints and PerformTextQuery algorithms
# using SAM3 for interactive point-based and text-based segmentation in DIVE.
#
# Usage:
#   python -m viame.core.interactive_segmentation --config interactive_sam3_segmenter.conf
# =============================================================================

# -----------------------------------------------------------------------------
# Image IO Algorithm Configuration
# -----------------------------------------------------------------------------
# Use KWIVER native image loading to avoid memory layout issues with PIL/numpy
image_io:type = vxl

# -----------------------------------------------------------------------------
# Segment Via Points Algorithm Configuration
# -----------------------------------------------------------------------------
block segment_via_points
  include common_sam3_segmenter.conf
  type = sam3
endblock

# -----------------------------------------------------------------------------
# Perform Text Query Algorithm Configuration
# -----------------------------------------------------------------------------
# SAM3 supports text-based detection and segmentation
block perform_text_query
  include common_sam3_segmenter.conf
  type = sam3
  sam3:detection_threshold = 0.3
  sam3:max_detections = 10
  sam3:iou_threshold = 0.3
endblock

# -----------------------------------------------------------------------------
# Service Configuration
# -----------------------------------------------------------------------------
service:hole_policy = remove
service:multipolygon_policy = largest
service:max_polygon_points = 25
service:adaptive_simplify = false

# -- end of file --
